---
title:  "스프링부트 데이터베이스설정"

categories:
  - 스프링
tags:
  - Blog
toc: true
toc_sticky: true
---

### 데이터베이스 설정하기

1. application.properties 파일을 지우고 application.yml 파일을 생성해준다
2. mysql을 사용했으므로 mysql에 맞게 설정

```

    spring:
    datasource:
        url: jdbc:mysql://localhost:3306/비밀?serverTimezone=Asia/Seoul
        username: root
        password: 비밀
        driver-class-name: com.mysql.cj.jdbc.Driver

    jpa:
        hibernate:
    #      ddl-auto: create # 자동으로 테이블을 만들어줌 애플리케이션 실행시에 다 지우고 다시 실행
        properties:
        hibernate:
    #        show_sql: true
            format_sql: true

    logging:
    level:
        org.hibernate.SQL: debug
        org.hibernate.type: trace # values(?,?)의 ?에 입력되는 로그를 남겨준다.
```

### 그 외

lombok은 스프링 컨테이너에 몇 줄안되는 코드로 올려준다.

```java

    @Entity
    @Getter
    @Setter
    public class Member {
        @Id @GeneratedValue
        private Long id;
        private String username;


    }
```

@Entity로 Member테이블을 컨테이너에 올려준다
@Getter @Setter로 getId()나 find()같은 객체를 지원해준다.
@Id @GeneratedValue는 엔터티를 구분해주는 키를 지정해준다.

위 와 같이 member테이블이 생성하게 되면 Repository를 만들어서 컨트롤한다.

```java

    @Repository // Entity에 의해 생성된 DB에 접근하는 메서드를 사용하기 위한 인터페이스이다.
    public class MemberRepository {

        @PersistenceContext
        private EntityManager em;

        public Long save(Member member)
        {
            em.persist(member);
            return member.getId();
        }

        public Member find(Long id)
        {
            return em.find(Member.class, id);
        }
    }

```

EntityManager를 선언하여 em.persist(member)로 테이블을 등록하고 find와 같은 객체를 통하여 정보를 얻을 수 있다.



