---
title:  "스프링 MVC(6)"

categories:
  - 스프링MVC
tags:
  - Blog
toc: true
toc_sticky: true
---

### 스프링 MVC 기본 기능

```java
@RestController
public class MappingController {
    private Logger log = LoggerFactory.getLogger(getClass());

    @RequestMapping("/hello-basic")
    public String helloBasic(){
        log.info("hellobasic");
        return "ok";
    }

    @GetMapping("/mapping/{userId}")
    public String mappingPath(@PathVariable("userId") String data){
        log.info("mappingPath userId={}",data);
        return "ok";
    }
}
```

- @RequestMapping()
    * /hello-basic URL 호출이 오면 이 메서드가 실행되도록 매핑
    * 대부분의 속성을 배열로 제공하므로 다중 URL 설정이 가능하다. @RequestMapping("/hello-basic","/hello")
    * @RequestMapping에 method 속성으로 HTTP 메서드를 지정하지 않으면 HTTP 메서드와 무관하게 호출(Get, HEAD, POST, PUT, PATCH, DELETE 모두 허용)
- @GetMapping에서 만약에 POST 요청을 하면 스프링 MVC는 HTTP 405 상태코드(Method Not Allowed)를 반환

#### PathVariable(경로 변수)

```java
    @GetMapping("/mapping/{userId}")
    public String mappingPath(@PathVariable("userId") String data){
        log.info("mappingPath userId={}",data);
        return "ok";
    }
```

- 최근 HTTP API는 다음과 같이 리소스 경로에 식별자를 넣는 스타일을 선호한다.
    * /mapping/userA
    * /users/1
- @RequestMapping은 URL 경로를 템플릿화 할 수 있는데, @PathVariable을 사용하면 매칭 되는 부분을 편리하게 조회할 수 있다
- @PathVariable의 이름과 파라미터 이름이 같으면 생략가능
    * @GetMapping("/mapping/{userId}) -> public String mappingPath(@PathVariable String userId)

#### 특정 조건 매핑

- 특정 파라미터 조건 매핑

```java
@GetMapping(value = "/mapping-param", params = "mode=debug")
public String mappingParam() {
    log.info("mappingParam");
    return "ok";
}
```
-> 특정 파라미터가 있거나 없는 조건을 추가할 수 있지만 잘 사용하지 않음

- 특정 헤더 조건 매핑

```java
@GetMapping(value = "/mapping-header", headers = "mode=debug")
public String mappingHeader() {
    log.info("mappingHeader");
    return "ok";
}
```
-> HTTP 헤더를 사용

- 미디어 타입 조건 매핑 : HTTP 요청 Content-Type,consume

```java
@PostMapping(value = "/mapping-consume", consumes = "application/json")
public String mappingConsumes() {
    log.info("mappingConsumes");
    return "ok";
}
```
-> 맞지 않으면 HTTP 415 상태코드(Unsupported Media Type)을 반환

- 미디어 타입 조건 매핑 : HTTP 요청 Accept, produce

```java
@PostMapping(value = "/mapping-produce", produces = "text/html")
public String mappingProduces() {
    log.info("mappingProduces");
    return "ok";
}

```
-> 만약 맞지 않으면 HTTP 406 상태코드(Not Acceptable)을 반환

**참고**
- consumes는 서버가 받을 수 있는 데이터 형식이고, produces는 클라이언트가 받을 수 있는 데이터 형식이다.

**출처 - 김영한의 스프링 MVC 1편**